# Migration `20200219131541-a`

This migration has been generated by lena at 2/19/2020, 1:15:41 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."about" (
    "id" text  NOT NULL ,
    "published" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "status" text  NOT NULL DEFAULT '',
    "text_arm" text  NOT NULL DEFAULT '',
    "text_eng" text  NOT NULL DEFAULT '',
    "text_rus" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."blog_post" (
    "content" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    "published" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "slug" text   ,
    "title" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."comment" (
    "blog_post_id" text  NOT NULL ,
    "content" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    "published" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."homepage_slider" (
    "filepath" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    "position" integer   ,
    "published" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."partner_slider" (
    "filepath" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    "published" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "url" text   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."user" (
    "email" text  NOT NULL DEFAULT '',
    "id" integer  NOT NULL ,
    "name" text  NOT NULL DEFAULT '',
    "password" text  NOT NULL DEFAULT '',
    "username" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE UNIQUE INDEX "user.email" ON "public"."user"("email")

CREATE UNIQUE INDEX "user.username" ON "public"."user"("username")

ALTER TABLE "public"."comment" ADD FOREIGN KEY ("blog_post_id")REFERENCES "public"."blog_post"("id") ON DELETE RESTRICT  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200219131541-a
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,55 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url      = "postgresql://postgres:1@localhost:5432/api_project?schema=public"
+}
+
+model about {
+  id        String     @default(uuid()) @id
+  status    String     @default("")
+  text_arm  String     @default("")
+  text_eng  String     @default("")
+  text_rus  String     @default("")
+  published DateTime   @default(now())
+}
+
+model blog_post {
+  id        String     @default(uuid())  @id
+  title     String     @default("")
+  content   String     @default("")
+  slug      String?
+  published DateTime   @default(now())
+  comments  comment[]  @relation(name:"blog-comment")
+}
+
+model comment {
+  id           String     @default(uuid())  @id
+  content      String     @default("")
+  blog_post_id blog_post  @relation(references: [id], name:"blog-comment")
+  published    DateTime   @default(now())
+}
+
+model homepage_slider {
+  id        String      @default(uuid())  @id
+  filepath  String      @default("")
+  position  Int?
+  published DateTime    @default(now())
+}
+
+model partner_slider {
+  id        String      @default(uuid())  @id
+  filepath  String      @default("")
+  url       String?
+  published DateTime    @default(now())
+}
+
+model user {
+  id         Int         @default(uuid())  @id
+  email      String      @default("") @unique
+  name       String      @default("")
+  password   String      @default("")
+  username   String      @default("") @unique
+}
```


